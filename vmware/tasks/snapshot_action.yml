---
# do the actual snapshot action - one of present, absent, revert, remove_all

- name: "Snapshot Action is setting snapshot state: {{ snapshot_target_state }}"
  connection: local
  community.vmware.vmware_guest_snapshot:
    hostname: "{{ vcenter_hostname }}"
    username: "{{ vcenter_username }}"
    password: "{{ vcenter_password }}"
    datacenter: "{{ datacenter_name }}"
    folder: "{{ datacenter_folder }}"
    name: "{{ fqdn }}"
    state: "{{ snapshot_target_state }}"
    snapshot_name: "{{ snap_name }}"
    description: "{{ snap_description }}"
    quiesce: "{{ quiesce }}"
    validate_certs: "{{ vmware_validate_certs }}"
